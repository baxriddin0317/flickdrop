"use client"
import clsx from "clsx"
import WinnerCard from "./WinnerCard"
import { winnersItems } from "@/data/upgradeSkins"
import { useState } from "react";

const WinnersList = () => {
  const [visibleCount, setVisibleCount] = useState(6);

  const visibleItems = winnersItems.slice(0, visibleCount);

  const handleLoadMore = () => {
    setVisibleCount(prev => prev + 6);
  };

  const isAllShown = visibleCount >= winnersItems.length;
  return (
    <div className="w-full bg-brand-disabled rounded-3xl border border-white/10">
      {/* winner list head */}
      <div className="flex items-center gap-1.5 px-3.5 py-4 lg:py-5 lg:px-7">
        <span>
          <svg xmlns="http://www.w3.org/2000/svg" width={24} height={24} viewBox="0 0 24 24" fill="none">
            <path d="M17.56 20.17C16.773 19.6453 16.1277 18.9345 15.6812 18.1007C15.2346 17.2669 15.0006 16.3359 15 15.39V14C14.9994 13.8154 14.9477 13.6345 14.8507 13.4774C14.7536 13.3203 14.6149 13.1931 14.45 13.11L12.45 12.11C12.3104 12.0397 12.1563 12.0031 12 12.0031C11.8437 12.0031 11.6896 12.0397 11.55 12.11L9.54998 13.11C9.38506 13.1931 9.24638 13.3203 9.1493 13.4774C9.05222 13.6345 9.00054 13.8154 8.99998 14V15.42C8.99932 16.3659 8.76535 17.2969 8.3188 18.1307C7.87225 18.9645 7.22691 19.6753 6.43998 20.2C6.27449 20.3238 6.15142 20.4958 6.08769 20.6924C6.02397 20.889 6.02271 21.1005 6.08411 21.2978C6.1455 21.4952 6.26652 21.6686 6.43053 21.7944C6.59454 21.9201 6.79347 21.992 6.99998 22H17C17.2145 22.0005 17.4234 21.932 17.596 21.8046C17.7686 21.6772 17.8957 21.4978 17.9584 21.2926C18.0212 21.0875 18.0164 20.8677 17.9446 20.6655C17.8729 20.4634 17.738 20.2897 17.56 20.17Z" fill="#22273D" />
            <path d="M18 22H5.99997C5.73475 22 5.4804 21.8947 5.29286 21.7071C5.10533 21.5196 4.99997 21.2652 4.99997 21C4.99997 20.7348 5.10533 20.4804 5.29286 20.2929C5.4804 20.1054 5.73475 20 5.99997 20H18C18.2652 20 18.5195 20.1054 18.7071 20.2929C18.8946 20.4804 19 20.7348 19 21C19 21.2652 18.8946 21.5196 18.7071 21.7071C18.5195 21.8947 18.2652 22 18 22ZM19.45 7.28002C19.3936 7.10043 19.2877 6.94041 19.1444 6.81834C19.0011 6.69628 18.8262 6.61714 18.64 6.59002L14.64 6.03002L12.89 2.55002C12.8061 2.38622 12.6786 2.24875 12.5215 2.15276C12.3645 2.05677 12.184 2.00598 12 2.00598C11.8159 2.00598 11.6354 2.05677 11.4784 2.15276C11.3214 2.24875 11.1939 2.38622 11.11 2.55002L9.33997 6.00002L5.33997 6.56002C5.1537 6.58714 4.97887 6.66628 4.83558 6.78834C4.69229 6.91041 4.58636 7.07043 4.52997 7.25002C4.47816 7.42458 4.47499 7.60997 4.52081 7.7862C4.56663 7.96243 4.6597 8.1228 4.78997 8.25002L7.66997 11L6.99997 14.83C6.9632 15.0165 6.98036 15.2097 7.04943 15.3868C7.11851 15.5639 7.23663 15.7176 7.38997 15.83C7.53392 15.9319 7.70224 15.9938 7.87786 16.0096C8.05347 16.0254 8.23015 15.9945 8.38997 15.92L12 14.07L15.56 15.89C15.6971 15.9577 15.8471 15.9952 16 16C16.1469 16.0022 16.2925 15.9719 16.4264 15.9114C16.5603 15.8508 16.6792 15.7616 16.7747 15.6498C16.8702 15.5381 16.9399 15.4068 16.9788 15.2651C17.0177 15.1234 17.025 14.9748 17 14.83L16.33 11L19.19 8.30002C19.3239 8.17099 19.4191 8.00718 19.465 7.827C19.511 7.64682 19.5057 7.4574 19.45 7.28002Z" fill="#768298" />
          </svg>
        </span>
        <h2 className="text-brand-gray-2 text-lg font-bold">
          Последние победители
        </h2>
      </div>
      {/* ===== */}
      <div className="flex flex-col max-h-[576px] overflow-y-auto scroll-style">
        {visibleItems.map(item => (
          <WinnerCard item={item} key={item.id} />
        ))}
      </div>

      {/* ===== */}
      {!isAllShown && <div className="flex items-center justify-center py-3">
        <button 
          className={clsx(
            "flex items-center justify-center h-11 w-52",
            "bg-brand-neutral-4 border border-white/10 rounded-lg",
            "text-brand-gray-2 font-bold cursor-pointer"
          )}
          onClick={handleLoadMore}
        >
        Загрузить еще
        </button>
      </div>}
    </div>
  )
}

export default WinnersList